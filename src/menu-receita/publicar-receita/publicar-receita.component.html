<form (keydown.enter)="$event.preventDefault()" class="compact" name="publicar">

    <clr-wizard #wizard [(clrWizardOpen)]="_open" clrWizardSize="xl">
        <clr-wizard-title>Publicar Receita</clr-wizard-title>

        <clr-wizard-button [type]="'cancel'">Cancelar</clr-wizard-button>
        <clr-wizard-button [type]="'previous'">Voltar</clr-wizard-button>
        <clr-wizard-button [type]="'next'">Avançar</clr-wizard-button>
        <clr-wizard-button [type]="'finish'">Publicar</clr-wizard-button>

        <clr-wizard-page>
            <ng-template clrPageTitle>Informações da Receita</ng-template>
            <ng-template clrPageNavTitle>Informações</ng-template>
            <section class="form-block">
                <div class="form-group">
                    <label for="nome" class="required">Nome da Receita: </label>
                    <input type="text" id="nome" required name="nome" [(ngModel)]="receita.nome" placeholder="Nome da Receita">
                </div>
                <div class="form-group">
                    <label class="required">Tempo de Preparo (minutos): </label>
                    <input type="number" name="minsPreparo" [(ngModel)]="receita.minsPreparo" placeholder="Tempo de Preparo (minutos)">
                </div>
                <div class="form-group">
                    <label class="required">Categoria da Receita: </label>
                    <div class="select">
                        <select name="receita.categoria" [(ngModel)]="receita.categoria">
                                    <option [ngValue]="null" disabled>Selecione</option>
                                    <option [ngValue]="cat" *ngFor="let cat of categorias">{{cat.nome}}</option>  
                            </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Imagem: </label>
                    <input type="file" accept="image" (change)="changeListener($event)">
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="card-img">
                                <img *ngIf="receita.foto" [src]="receita.foto">
                            </div>
                        </div>
                    </div>

                </div>
                <div class="form-group">
                    <label class="required">Descrição da Receita: </label>
                    <textarea name="receita.descricao" [(ngModel)]="receita.descricao" rows="3"></textarea>
                </div>
            </section>

        </clr-wizard-page>

        <clr-wizard-page>
            <ng-template clrPageTitle>Ingredientes</ng-template>
            <ng-template clrPageNavTitle>Ingredientes</ng-template>
            <div class="alert alert-info">
                <div class="alert-items">
                    <div class="alert-item static">
                        <div class="alert-icon-wrapper">
                            <clr-icon class="alert-icon" shape="info-standard"></clr-icon>
                        </div>
                        <span class="alert-text">Adicione todos os ingredientes necessários para o preparo da receita!</span>
                    </div>
                </div>
            </div>
            <section class="form-block">
                <label>Adicionar Ingrediente</label>
                <div class="form-group">
                    <label>Ingrediente:</label>
                    <ng2-completer name="ingredienteCad.ingrediente" [(ngModel)]="ingredienteCad.ingrediente" type="text" textNoResults="Ingrediente não encontrado"
                        [datasource]="dataService" [minSearchLength]="3"></ng2-completer>
                    <label class="required">Medida: </label>
                    <div class="select">
                        <select name="ingredienteCad.uMedida" [(ngModel)]="ingredienteCad.uMedida">
                                        <option [ngValue]="null" disabled>Selecione</option>
                                        <option [ngValue]="med" *ngFor="let med of medidas">{{med.desc}}</option>
                                    </select>
                    </div>
                    <label class="required">Quantidade:</label>
                    <input name="ingredienteCad.quant" [(ngModel)]="ingredienteCad.quant" type="number" placeholder="Digite a quantidade">

                </div>
                <button class="btn btn-primary btn-sm" (click)="adicionarIngrediente()">Adicionar</button>
                <button class="btn btn-outline btn-sm" (click)="limparIngrediente()">Limpar</button>

            </section>
            <section class="form-block">
                <label>Ingredientes Cadastrados</label>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Unidade de Medida</th>
                            <th>Quantidade</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let ingt of receita.ingts">
                            <td>{{ingt.ingrediente}}</td>
                            <td>{{ingt.uMedida.desc}}</td>
                            <td>{{ingt.quant}}</td>
                            <td>
                                <clr-icon shape="trash"></clr-icon>
                                <clr-icon shape="pencil"></clr-icon>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </clr-wizard-page>
    </clr-wizard>

</form>
{{receita | json}}